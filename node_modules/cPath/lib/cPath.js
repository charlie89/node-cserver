(function(context, undefined) {
   function getRootDir() {
      var serverFile = require.main.filename; // locate /path/to/server.js
      return getUpperPath(serverFile);
   }

   function getUpperPath(path) {
      var arr = path.split("/");
      if (arr[arr.length - 1] == "") {
         arr.pop();
      }
      arr.pop();
      if (arr.length<=0) return '';   // no single / needed in my apps
      return arr.join("/") + "/";
   }

   function getFileName(filename) { //returns the filename WITHOUT extension
      var index = filename.lastIndexOf(".");
      if (index < 0) index = filename.length;
      var name = filename.substring(0, index);
      if (name.length <= 0) name = filename;
      return name;
   }
   context.getRootDir = getRootDir;
   context.getUpperPath = getUpperPath;
   context.getFileName = getFileName;
})(exports);
